# v0.4.0 Quick Reference
## TL;DR Implementation Guide

**Branch:** `feature/v0.4.0`
**Goal:** Production-ready organizational features and polish for v1.0 launch

---

## What's In Scope

‚úÖ **Multi-select documents & bulk operations** (delete, tag, move)
‚úÖ **Splash screen** (first launch only)
‚úÖ **Settings/Preferences screen** (fonts, export, CloudKit status)
‚úÖ **App icon & branding** (all platform sizes)
‚úÖ **Quality assurance** (CloudKit sync, performance, memory leaks)

---

## What's Out of Scope (Deferred to v2.0)

‚ùå Snippets system
‚ùå Editor intelligence (auto-pairing, smart typing)
‚ùå LaTeX/Math rendering
‚ùå macOS System Extension

**Why?** Ship v1.0 faster, gather real user feedback first, then build advanced features users actually want.

---

## Implementation Order

### 1Ô∏è‚É£ Organizational Features (Week 1)
**Files to modify:** `DocumentListView.swift`
**Files to create:** `BulkOperationsToolbar.swift`, `TagPickerSheet.swift`, `ProjectPickerSheet.swift`

**Key tasks:**
- Add multi-select state (`Set<PersistentIdentifier>`)
- Cmd/Ctrl-Click to select multiple documents
- Context menu for bulk operations
- Confirmation dialogs for destructive operations

---

### 2Ô∏è‚É£ First Launch Experience (Week 1)
**Files to modify:** `Markdown_EditorApp.swift`, `ContentView.swift`
**Files to create:** `WelcomeSplashView.swift`, `Resources/SampleDocument.md`

**Key tasks:**
- Use `@AppStorage("hasLaunchedBefore")` for tracking
- Show full-screen splash on first launch
- Create sample document with Markdown examples
- "Don't show again" checkbox

---

### 3Ô∏è‚É£ Settings Screen (Week 2)
**Files to modify:** `AppCommands.swift`, `ContentView.swift`
**Files to create:** `SettingsView.swift`, `EditorSettingsView.swift`, `PreviewSettingsView.swift`, `SyncSettingsView.swift`, `AboutView.swift`, `AppSettings.swift`

**Key tasks:**
- Settings navigation (‚åò, on Mac, button on iOS)
- Font preferences (family, size)
- Export settings (Mac only: default location)
- CloudKit sync status display
- About section (version, credits)
- Persist with `@AppStorage`

---

### 4Ô∏è‚É£ App Icon & Branding (Week 2-3)
**Files to modify:** `Assets.xcassets/AppIcon.appiconset/`
**External work:** Design in Figma/Sketch

**Key tasks:**
- Design 1024x1024 master icon
- Generate all required sizes (macOS, iOS, iPadOS)
- Create launch screen
- Prepare App Store screenshots (for v1.0)

---

### 5Ô∏è‚É£ Quality Assurance (Week 3-4)
**Tools:** Xcode Instruments (Leaks, Time Profiler, Allocations)

**Key tasks:**
- Test CloudKit sync (Mac ‚Üî iPad ‚Üî iPhone)
- Cross-platform testing (all features, all devices)
- Performance testing (100+ documents, smooth scrolling)
- Memory leak detection
- Accessibility audit (VoiceOver, Dynamic Type)

---

## Key Architecture Patterns

### Multi-Select Pattern
```swift
@State private var selectedDocumentIDs: Set<PersistentIdentifier> = []

// On document row tap with modifier
if event.modifiers.contains(.command) { // or .control on iOS
    if selectedDocumentIDs.contains(document.id) {
        selectedDocumentIDs.remove(document.id)
    } else {
        selectedDocumentIDs.insert(document.id)
    }
}
```

### Settings Persistence Pattern
```swift
// In AppSettings.swift
@Observable
class AppSettings {
    @AppStorage("editorFontSize") var editorFontSize: Double = 14.0
    @AppStorage("previewFontSize") var previewFontSize: Double = 14.0
    // ... more settings
}

// In views
@Environment(AppSettings.self) private var settings
```

### First Launch Detection Pattern
```swift
@AppStorage("hasLaunchedBefore") private var hasLaunchedBefore = false

.onAppear {
    if !hasLaunchedBefore {
        showSplashScreen = true
        createSampleDocument()
        hasLaunchedBefore = true
    }
}
```

---

## Testing Checklist

### Multi-Select & Bulk Operations
- [ ] Select 5 documents on Mac with Cmd-Click
- [ ] Select 10 documents on iPad with Ctrl-Click or long-press
- [ ] Bulk delete with confirmation dialog
- [ ] Bulk tag application
- [ ] Bulk move to project

### First Launch
- [ ] Delete app, reinstall, verify splash appears
- [ ] Verify sample document created
- [ ] Relaunch, verify splash does NOT appear
- [ ] Toggle "Don't show again" works

### Settings
- [ ] Change editor font size, see immediate update
- [ ] Change preview font size, see immediate update
- [ ] Change default export location (Mac)
- [ ] View CloudKit sync status
- [ ] About section shows correct version

### CloudKit Sync
- [ ] Create on Mac, appears on iPad within 60s
- [ ] Edit on iPad, changes on Mac
- [ ] Delete on iPhone, removed everywhere
- [ ] Offline changes sync when back online

### Performance
- [ ] Create 100 documents, scroll smoothly (60fps)
- [ ] App launches in < 2 seconds
- [ ] Edit 5000-word document without typing lag

### Memory
- [ ] Run Instruments (Leaks template)
- [ ] Exercise all features, check for leaks
- [ ] Verify no retain cycles in closures

---

## Success Criteria

v0.4.0 is **DONE** when:
1. ‚úÖ Multi-select and bulk operations work on all platforms
2. ‚úÖ First launch splash guides new users
3. ‚úÖ Settings screen allows customization
4. ‚úÖ App icon looks professional everywhere
5. ‚úÖ CloudKit sync verified across devices
6. ‚úÖ No memory leaks
7. ‚úÖ Performance targets met
8. ‚úÖ All manual tests pass

Then we're ready for v1.0 polish and App Store launch! üöÄ

---

## Questions?

Refer to the comprehensive plan:
- **Full details:** `docs/v0.4.0_IMPLEMENTATION_PLAN.md`
- **Architecture:** `CLAUDE.md`
- **Lessons learned:** `Journal.md`
- **Roadmap:** `README.md`
